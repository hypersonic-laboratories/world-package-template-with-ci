# Helix Package Deployment Template# Helix Package Deployment Template# Helix Package Template with CI/CD

Automated GitHub Actions workflow for deploying Helix packages.Automated GitHub Actions workflow for deploying Helix packages directly from your workspace.A ready-to-use GitHub repository template for automatically deploying Helix packages with GitHub Actions.

## Overview## 🚀 What is this?## 🚀 What is this?

This repository contains a GitHub Actions workflow that automatically deploys your Helix workspace when you push changes. The workflow creates an archive of your content and scripts, updates the package version via the Helix API, and uploads the files to the CDN.This template provides an automated CI/CD pipeline that deploys your Helix workspace to the Helix platform. When you push changes to your repository, it automatically:This template provides an automated deployment pipeline for Helix packages. When you push changes to your repository, it automatically:

## Prerequisites1. ✅ Creates a compressed archive from your `content` and `scripts` folders1. ✅ Creates a gzipped tar archive from your `content` and `scripts` folders

- Helix workspace created in the Helix Game Client2. ✅ Updates your package version via the Helix API2. ✅ Creates a new package version via the Helix API

- GitHub repository for your workspace

- Helix API access token3. ✅ Uploads your package to the Helix CDN3. ✅ Uploads your package to the Helix CDN

## Setup4. ✅ Makes your changes live in the Helix ecosystem4. ✅ Makes your package available in the Helix ecosystem

### 1. Copy Workflow Files## 📋 Prerequisites## 📋 Quick Start

Copy the `.github` folder from this template to your workspace repository:- A Helix workspace (created in the Helix Game Client)### 1. Use This Template

``````bash- A GitHub repository for your workspace

cp -r .github /path/to/your/workspace/

```- A Helix API access tokenClick "Use this template" → "Create a new repository" to create your own package repository.



Repository structure:## 🎯 Quick Setup (3 Steps)### 2. Set Up Your API Token



```### Step 1: Copy the GitHub Actions Folder1. Go to your repository **Settings** → **Secrets and variables** → **Actions**

your-workspace/

├── .github/2. Click **New repository secret**

│   ├── workflows/

│   │   └── deploy.ymlCopy the `.github` folder from this template into your Helix workspace repository:3. Add:

│   └── actions/

│       ├── create-package-archive/- **Name**: `ACCESS_TOKEN`

│       ├── create-package-version/

│       └── upload-package-files/```bash - **Secret**: Your Helix API authentication token

├── content/

├── scripts/# From this template repository

└── metadata.json

```cp -r .github /path/to/your/workspace/### 3. Update Package Metadata



### 2. Add API Token Secret```



Add a repository secret named `ACCESS_TOKEN` containing your Helix API token:Edit `metadata.json` with your package information:



1. Go to repository SettingsYour workspace should have this structure:

2. Navigate to Secrets and variables > Actions

3. Create new secret: `ACCESS_TOKEN`````json

4. Set the value to your Helix API token

```{

### 3. Deploy

your-workspace/  "package": {

Push the `.github` folder to your repository:

├── .github/              # ← The folder you just copied    "id": "YOUR-PACKAGE-UUID",

```bash

git add .github│   ├── workflows/    "creatorId": "YOUR-CREATOR-UUID",

git commit -m "Add deployment workflow"

git push│   │   └── deploy.yml    "name": "Your Package Name",

``````

│ └── actions/ "slug": "your-package-slug",

The workflow will automatically run on every push to the `main` branch.

│ ├── create-package-archive/ "description": "Your package description",

## Configuration

│ ├── create-package-version/ "type": "World",

### Deployment Branch

│ └── upload-package-files/ "contentRating": "Everyone",

The workflow triggers on pushes to `main` by default. To change this, edit `.github/workflows/deploy.yml`:

├── content/ # Your workspace content (auto-generated by Helix) "tags": ["tag1", "tag2"],

```````yaml

on:├── scripts/              # Your workspace scripts (if any)    "isPrivate": true

    push:

        branches:└── metadata.json         # Your workspace metadata (auto-generated by Helix)  },

            - main

``````  "dependencyIds": ["dependency-uuid-1", "dependency-uuid-2"]



### API URL}



The default API URL is `https://helix-backend-staging.up.railway.app`. To change it, edit `.github/workflows/deploy.yml`:### Step 2: Add Your API Token to GitHub```



```yaml

default: "https://helix-backend-staging.up.railway.app"

```1. Go to your repository on GitHub**Important**: Replace `YOUR-PACKAGE-UUID` with your actual package UUID from the Helix platform.



### Multiple Branches2. Navigate to **Settings** → **Secrets and variables** → **Actions**



To deploy from multiple branches:3. Click **New repository secret**### 4. Add Your Package Content



```yaml4. Add the secret:

branches:

    - main   - **Name**: `ACCESS_TOKEN`Replace the content in these folders with your package files:

    - staging

    - production   - **Secret**: Your Helix API authentication token

```````

``````

## How It Works

### Step 3: Push and Deploy!your-repo/

The workflow performs the following steps:

├── content/ # REQUIRED - Your package content (maps, assets, etc.)

1. Creates a tar.gz archive from `content/` and `scripts/` folders

2. Reads the package version ID from `metadata.json`Commit and push the `.github` folder to your repository:│ └── map.json

3. Calls PATCH `/api/v1/package-versions/{id}` with archive size

4. Receives pre-signed upload URLs├── scripts/ # OPTIONAL - Your package scripts

5. Uploads archive to client and server URLs

````bash│ └── ...

## Monitoring

git add .github└── metadata.json     # Package metadata

View deployment status in the Actions tab. Successful deployments show:

git commit -m "Add GitHub Actions deployment workflow"```

```

Deployment Summarygit push

- Version ID: f08f5b21-5af7-414f-a546-9a85dcb782aa

- Package ID: cbb5b42f-135b-47dc-8f40-d96aea0fcc2c```### 5. Push to Deploy

- Archive Size: 12345678 bytes

```



## Manual DeploymentThat's it! From now on, every push to the `main` branch will automatically deploy your workspace.Commit and push your changes to the `main` branch:



To manually trigger a deployment:



1. Navigate to Actions tab## 🔧 Configuration```bash

2. Select Deploy Package workflow

3. Click Run workflowgit add .



## Workspace Files### Change the Deployment Branchgit commit -m "Update package content"



- `metadata.json` - Auto-generated by Helix, contains package and version IDs (do not edit manually)git push

- `content/` - Workspace content (required)

- `scripts/` - Lua scripts (optional)By default, the workflow triggers on pushes to the `main` branch.```



## Troubleshooting



### Error: 'content' folder is required but not foundTo change this, edit `.github/workflows/deploy.yml` (line 6):The GitHub Action will automatically run and deploy your package! 🎉



The workspace is missing the `content/` folder. This folder is automatically created by Helix Game Client.



### Error: id not found in metadata.json```yaml## ⚙️ Configuration



The `metadata.json` file is missing or doesn't contain the `id` field. Ensure the file was generated by Helix and has not been manually edited.on:



### Error: Failed to update package version (HTTP 401)    push:### API URL Configuration



The API token is invalid or expired. Verify the `ACCESS_TOKEN` secret is set correctly in repository settings.        branches:



### Error: Failed to update package version (HTTP 404)            - main  # Change this to your preferred branchThe workflow uses the staging API by default: `https://helix-backend-staging.up.railway.app`



The package version ID in `metadata.json` doesn't exist. Ensure you've created the package version in Helix before deploying.````



### Scripts folder not includedTo change the API URL:



The `scripts/` folder must exist and contain at least one file to be included in the deployment.### Change the API URL



## Security1. Open `.github/workflows/deploy.yml`



- Never commit API tokens to the repositoryBy default, the workflow uses the staging API: `https://helix-backend-staging.up.railway.app`2. Find the `apiUrl` default value (around line 9)

- Use GitHub Secrets for all sensitive data

- Keep private repositories if content is proprietary3. Change it to your desired API endpoint



## API ReferenceTo change this, edit `.github/workflows/deploy.yml` (line 12):



**PATCH** `/api/v1/package-versions/{packageVersionId}`````yaml



Request:```yamlapiUrl:

```json

{default: "https://helix-backend-staging.up.railway.app"  # Change this  description: "API URL"

  "clientSize": 12345,

  "serverSize": 12345```  required: true

}

```  type: string



Response:### Deploy to Multiple Branches  default: "https://your-api-url.com" # Change this

```json

{````

  "item": {

    "id": "version-uuid",You can configure the workflow to deploy from multiple branches:

    "packageId": "package-uuid",

    "clientUploadUrl": "https://...",### Branch Configuration

    "serverUploadUrl": "https://..."

  }````yaml

}

```on:By default, the workflow triggers on pushes to the `main` branch.


    push:

        branches:To change the deployment branch:

            - main

            - staging1. Open `.github/workflows/deploy.yml`

            - production2. Find the `branches` section (around line 6)

```3. Change `main` to your preferred branch



## 📊 How It Works```yaml

on:

### Deployment Flow  push:

    branches:

```      - main # Change this to your branch name

Push to main branch```

    ↓

GitHub Action triggersYou can also add multiple branches:

    ↓

Create archive from content/ and scripts/```yaml

    ↓branches:

Calculate archive size  - main

    ↓  - staging

Update package version via PATCH API  - production

    ↓```

Receive pre-signed upload URLs

    ↓## 📊 How It Works

Upload to client URL

    ↓### Automatic Deployment Flow

Upload to server URL

    ↓```

Deployment complete! ✅Push to main branch

```    ↓

GitHub Action triggers

### What Gets Deployed    ↓

Create archive (content.tar.gz)

The workflow automatically includes:    ↓

- **content/** folder (required) - Your workspace contentCalculate file size

- **scripts/** folder (optional) - Your workspace scripts, if present    ↓

Call Helix API to create package version

The workflow reads the package version ID from your `metadata.json` file (auto-generated by Helix) and updates that specific version.    ↓

Get pre-signed upload URLs

## 🔍 Monitoring Deployments    ↓

Upload archive to client URL

### View Deployment Status    ↓

Upload archive to server URL

1. Go to the **Actions** tab in your repository    ↓

2. Click on the latest workflow runDeployment complete! ✅

3. Expand the steps to see detailed logs```



### Successful Deployment### What Gets Included in the Archive



After each successful deployment, you'll see:- **content/** folder (required) - Always included

- **scripts/** folder (optional) - Included if present

``````

## Deployment SummaryThe workflow automatically detects if you have a `scripts` folder and includes it in the archive.

✅ Package version updated successfully## 🔍 Monitoring Deployments

- Version ID: f08f5b21-5af7-414f-a546-9a85dcb782aa

- Package ID: cbb5b42f-135b-47dc-8f40-d96aea0fcc2c### View Workflow Status

- Archive Size: 12345678 bytes

````1. Go to the **Actions** tab in your repository

2. Click on the latest workflow run

## 🛠️ Manual Deployment3. Expand the steps to see detailed logs



You can trigger deployments manually without pushing code:### Deployment Summary



1. Go to the **Actions** tabAfter each successful deployment, you'll see a summary showing:

2. Select **Deploy Package** workflow

3. Click **Run workflow**```

4. (Optional) Change the API URL## Deployment Summary

5. Click **Run workflow**

✅ Package version created successfully

## 📁 Understanding Your Workspace- Version ID: abc-123-def-456

- Package ID: your-package-id

Your Helix workspace is automatically managed by the Helix Game Client:- Archive Size: 12345678 bytes

````

- **metadata.json** - Auto-generated, contains package info and version ID

- **content/** - Your maps, assets, and content files## 🛠️ Manual Deployment

- **scripts/** - Your Lua scripts (optional)

You can also trigger deployments manually:

**Important**: Don't manually edit `metadata.json`. This file is managed by the Helix Game Client and contains the critical `id` field used for deployments.

1. Go to **Actions** tab

## 🐛 Troubleshooting2. Select **Deploy Package** workflow

3. Click **Run workflow**

### Error: 'content' folder is required but not found4. (Optional) Change the API URL if needed

5. Click **Run workflow**

**Solution**: Make sure your workspace has a `content/` folder. This is automatically created by the Helix Game Client.

## 📁 Repository Structure

### Error: id not found in metadata.json

`````

**Solution**: .

- Ensure your `metadata.json` file exists and was generated by Helix├── .github/

- Check that the `id` field is present in the root of the JSON│   ├── workflows/

- Don't manually edit this file│   │   └── deploy.yml                    # Main deployment workflow

│   └── actions/

### Error: Failed to update package version (HTTP 401)│       ├── create-package-archive/       # Creates tar.gz from folders

│       │   └── action.yml

**Solution**:│       ├── create-package-version/       # Calls API to create version

- Verify your `ACCESS_TOKEN` secret is set correctly in repository settings│       │   └── action.yml

- Check that the token hasn't expired│       └── upload-package-files/         # Uploads to pre-signed URLs

- Ensure the token has the correct permissions for your package│           └── action.yml

├── content/                              # Your package content (REQUIRED)

### Error: Failed to update package version (HTTP 404)├── scripts/                              # Your package scripts (OPTIONAL)

├── metadata.json                         # Package metadata

**Solution**:└── README.md                             # This file

- The package version ID in `metadata.json` doesn't exist```

- Make sure you've created the package version in Helix first

- Verify the `id` in `metadata.json` matches an existing version## 🔧 Customization



### Scripts folder not included in deployment### Modifying the Workflow



**Solution**:The workflow is built with modular composite actions, making it easy to customize:

- Ensure your `scripts/` folder exists in your workspace

- The folder must contain at least one file to be included- **create-package-archive** - Modify how archives are created

- Check the workflow logs to confirm it detected the scripts folder- **create-package-version** - Customize API requests or payload

- **upload-package-files** - Change upload behavior or add retry logic

## 🔐 Security Best Practices

### Example: Adding Version Names

- ✅ Never commit your API token to the repository

- ✅ Always use GitHub Secrets for sensitive dataEdit `.github/actions/create-package-version/action.yml` to include version names in the API payload.

- ✅ The `ACCESS_TOKEN` secret is only accessible to workflow runs

- ✅ Pre-signed upload URLs expire automatically## 🐛 Troubleshooting

- ✅ Keep your repository private if it contains proprietary content

### Error: 'content' folder is required but not found

## 📚 Advanced Usage

**Solution**: Make sure you have a `content/` folder in your repository root with files in it.

### Customizing the Workflow

### Error: package.id not found in metadata.json

The workflow uses modular composite actions located in `.github/actions/`:

**Solution**:

- **create-package-archive/** - Creates the tar.gz archive

- **create-package-version/** - Calls the Helix API to update the version- Check that your `metadata.json` has the correct structure

- **upload-package-files/** - Uploads to pre-signed URLs- Verify the `package.id` field is set with a valid UUID



You can modify these actions to customize the deployment process.### Error: Failed to create package version (HTTP 401)



### Example: Adding Notifications**Solution**:



Add a notification step to `.github/workflows/deploy.yml`:- Verify your `ACCESS_TOKEN` secret is set correctly in repository settings

- Check that the token hasn't expired

```yaml- Ensure the token has the correct permissions

- name: Notify on success

  if: success()### Error: Failed to upload to client/server URL

  run: |

    echo "Deployment successful! 🎉"**Solution**:

    # Add your notification logic here (Slack, Discord, etc.)

```- Pre-signed URLs expire after a certain time

- Re-run the workflow to get fresh upload URLs

### Example: Conditional Deployments- Check that your archive was created successfully



Deploy only when specific files change:### Scripts folder not included



```yaml**Solution**:

on:

  push:- Ensure your `scripts/` folder exists in the repository root

    branches:- Check the workflow logs to see if it detected the scripts folder

      - main- The folder must contain at least one file

    paths:

      - 'content/**'## 📚 API Reference

      - 'scripts/**'

```### Package Version Endpoint



## 🔄 Workflow for Developers**POST** `/api/v1/package-versions`



### Daily Development Workflow**Headers**:



1. **Make changes** in Helix Game Client```

2. **Save your workspace** (metadata.json updates automatically)Content-Type: application/json

3. **Commit and push** your changesAuthorization: Bearer <ACCESS_TOKEN>

4. **Automatic deployment** happens via GitHub Actions```

5. **Verify deployment** in the Actions tab

**Request Body**:

### Team Workflow

```json

1. **Create feature branches** for development{

2. **Make changes** and push to feature branch  "packageId": "package-uuid",

3. **Create pull request** to main branch  "clientSize": 12345,

4. **Review and merge** PR  "serverSize": 12345,

5. **Automatic deployment** on merge to main  "dependencyIds": ["dep-uuid-1", "dep-uuid-2"]

}

## 📖 API Reference```



### Update Package Version**Response**:



**PATCH** `/api/v1/package-versions/{packageVersionId}````json

{

**Headers**:  "item": {

```    "id": "version-uuid",

Content-Type: application/json    "packageId": "package-uuid",

Authorization: Bearer <ACCESS_TOKEN>    "clientUploadUrl": "https://...",

```    "serverUploadUrl": "https://...",

    "clientSize": 12345,

**Request Body**:    "serverSize": 12345

```json  }

{}

  "clientSize": 12345,```

  "serverSize": 12345

}## 🔐 Security

`````

- **Never commit your API token** to the repository

**Response**:- Always use GitHub Secrets for sensitive data

```json- The `ACCESS_TOKEN` secret is only accessible to workflow runs

{- Pre-signed URLs expire automatically for security

"item": {

    "id": "version-uuid",## 🤝 Contributing

    "packageId": "package-uuid",

    "clientUploadUrl": "https://...",Feel free to fork this template and customize it for your needs. If you find bugs or have suggestions, please open an issue.

    "serverUploadUrl": "https://...",

    "clientSize": 12345,## 📄 License

    "serverSize": 12345

}This template is provided as-is for use with Helix packages.

}

```---



## ❓ FAQ**Happy Deploying! 🚀**



**Q: Do I need to edit metadata.json?**  For questions or support, please refer to the Helix platform documentation or community resources.

A: No! This file is automatically managed by the Helix Game Client. Don't edit it manually.

**Q: Can I use this with multiple workspaces?**
A: Yes! Just copy the `.github` folder to each workspace repository and set up the `ACCESS_TOKEN` secret.

**Q: What happens if deployment fails?**
A: The workflow will stop and show you the error. Your previous version remains unaffected.

**Q: Can I roll back to a previous version?**
A: The workflow updates the existing version. To roll back, you'll need to deploy from a previous commit or use the Helix platform's version management.

**Q: How large can my package be?**
A: Check with the Helix API documentation for size limits. The workflow will show the archive size in the deployment summary.

## 🤝 Contributing

This is a template repository. Feel free to fork and customize it for your needs!

## 📄 License

This template is provided as-is for use with Helix packages.

---

**Questions?** Check the [Helix Documentation](https://docs.helixgame.com) or reach out to the Helix community.

**Happy Deploying! 🚀**
```
